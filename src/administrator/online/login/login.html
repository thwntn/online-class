<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./assets/style/login.css">
    <link rel="stylesheet" href="./assets/framework/css/bootstrap.css">
    <script src = './assets/framework/js/bootstrap.js'></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet">
</head>
<body>
    <div id="root">
        <div class="container-fluid">
            <div class="frame row">
                <div class="content col-md-4">
                    <h2>Đăng nhập</h2>
                    <h5>Tên đăng nhập</h5>
                    <input class = 'username' type="text" placeholder="Tên tài khoản hoặc email">
                    <h5>Mật khẩu</h5>
                    <input class="password" type = 'pasword' placeholder="Nhập mật khẩu">
                    <button>Gặp sự cố với mật khẩu ?</button>
                    <button class="signin">Đăng nhập</button>
                    <h5>Đăng nhập với</h5>
                    <div class="sign-with">
                        <button class="facebook"><i class="fa-brands fa-facebook-f"></i></button>
                        <button class="google"><i class="fa-brands fa-google"></i></button>
                    </div>
                    <div class="sign-up-button">
                        <a href="./signup.html">Đăng kí</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="errBox">
        <h5>Sai tên đăng nhập hoặc mật khẩu !</h5>
    </div>
        
</body>
<script>
    document.querySelector('.signin').addEventListener('click', function(){
        var data = []
        console.log(document.querySelector('.username').value);
        data.push(document.querySelector('.username').value)
        data.push(document.querySelector('.password').value)
        //fetch
        async function login () {
            const url = 'http://localhost/online-class/src/administrator/api/login.php'
            const response = await fetch(url, {
                method: 'POST',
                mode: 'cors',
                cache: 'no-cache',
                credentials: 'same-origin',
                headers: {
                'Content-Type': 'application/json'
                },
                redirect: 'follow',
                referrerPolicy: 'no-referrer',
                body: JSON.stringify(data)
            })
            await response.json().then((responseJSON) => {
                if (responseJSON == 100) {
                    window.sessionStorage.setItem('userOL', document.querySelector('.username').value)
                    window.location.href = "http://localhost/online-class/src/administrator/online/build/index.html"
                }
            })
        }
        login()
        document.querySelector('.errBox').classList.add('active')
        setTimeout(function() {
            document.querySelector('.errBox').classList.remove('active')
        }, 2000)
    })
</script>
</html>